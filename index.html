<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Link Opener</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-text {
            background: linear-gradient(90deg, #4f46e5, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .gradient-border-button {
            background-image: linear-gradient(to right, #4338ca, #be185d), linear-gradient(to right, #4338ca, #be185d);
            background-size: 100% 2px, 100% 2px;
            background-position: 0 100%, 0 0;
            background-repeat: no-repeat;
            transition: all 0.3s;
        }
        .gradient-border-button:hover {
            background-size: 0 2px, 100% 2px;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 antialiased">

    <!-- Redirect Logic: This script checks the OS and tries to open the link in the YouTube app directly. -->
    <script>
        (function() {
            const params = new URLSearchParams(window.location.search);
            const videoId = params.get('v');
            const channelId = params.get('c');
            const playlistId = params.get('p');

            // If no ID is found, do nothing. The page will render the generator UI.
            if (!videoId && !channelId && !playlistId) {
                return;
            }

            const ua = navigator.userAgent;
            const isIOS = /iPad|iPhone|iPod/.test(ua);
            const isAndroid = /Android/.test(ua);

            let webUrl = '';
            let appUrl = '';
            
            // Construct the standard web URL and the app-specific URL
            if (videoId) {
                webUrl = `https://www.youtube.com/watch?v=${videoId}`;
                // This is a more reliable deep link for iOS videos
                appUrl = `vnd.youtube:${videoId}`; 
            } else if (channelId) {
                webUrl = `https://www.youtube.com/channel/${channelId}`;
                appUrl = `vnd.youtube://channel/${channelId}`;
            } else if (playlistId) {
                webUrl = `https://www.youtube.com/playlist?list=${playlistId}`;
                appUrl = `vnd.youtube://playlist?list=${playlistId}`;
            }
            
            if (isIOS) {
                // For iOS, we attempt to open the app via the custom URL scheme.
                window.location.href = appUrl;
                
                // If the app doesn't open, the user will stay on this page.
                // After a short delay, we redirect them to the web URL as a fallback.
                setTimeout(function () {
                    window.location.href = webUrl;
                }, 1500);

            } else if (isAndroid) {
                // For Android, the Intent URL is the most robust method.
                // It tries to open the YouTube app and provides a fallback URL for the browser.
                const intentUrl = `intent://${webUrl.substring(8)}#Intent;package=com.google.android.youtube;scheme=https;S.browser_fallback_url=${encodeURIComponent(webUrl)};end`;
                window.location.href = intentUrl;

            } else {
                // For desktop or other mobile OS, just go to the standard web URL.
                window.location.href = webUrl;
            }
        })();
    </script>

    <div class="container mx-auto px-4 py-8 md:py-16">

        <!-- Header -->
        <header class="text-center mb-12 md:mb-20">
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-4">
                Make YouTube Links <span class="gradient-text">Open in the App</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-400 max-w-3xl mx-auto">
                Stop losing engagement. Convert your YouTube links to open directly in the app, where viewers are logged in and ready to like, comment, and subscribe.
            </p>
        </header>

        <!-- Link Generator -->
        <main class="max-w-2xl mx-auto bg-gray-800/50 rounded-2xl p-6 md:p-8 border border-gray-700 shadow-2xl shadow-indigo-500/10">
            <form id="link-form">
                <label for="youtube-url" class="block text-sm font-medium text-gray-300 mb-2">Paste your YouTube Video, Channel, or Playlist URL</label>
                <div class="flex flex-col sm:flex-row gap-3">
                    <input type="url" id="youtube-url" name="youtube-url" required placeholder="https://www.youtube.com/watch?v=..." class="w-full px-4 py-3 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none">
                    <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors whitespace-nowrap">
                        Create Link
                    </button>
                </div>
            </form>

            <!-- Result Display -->
            <div id="result" class="mt-6 hidden">
                <label for="generated-url" class="block text-sm font-medium text-gray-300 mb-2">Your new link:</label>
                <div class="flex flex-col sm:flex-row gap-3">
                    <input type="text" id="generated-url" readonly class="w-full px-4 py-3 bg-gray-900 border border-gray-600 rounded-lg text-green-400 font-mono">
                    <button id="copy-button" class="bg-gray-600 hover:bg-gray-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors whitespace-nowrap">
                        Copy
                    </button>
                </div>
            </div>
            
            <!-- Error Message -->
            <div id="error-message" class="mt-4 text-red-400 text-center hidden">
                Invalid YouTube URL. Please check and try again.
            </div>
        </main>

        <!-- How it works -->
        <section class="mt-20 md:mt-28 text-center">
            <h2 class="text-3xl font-bold mb-10">How It Works</h2>
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <div class="bg-gray-800/30 p-6 rounded-xl border border-gray-700">
                    <div class="text-indigo-400 text-4xl font-black mb-4">1</div>
                    <h3 class="text-xl font-semibold mb-2">Paste Your Link</h3>
                    <p class="text-gray-400">Copy any YouTube video, channel, or playlist URL and paste it above.</p>
                </div>
                <div class="bg-gray-800/30 p-6 rounded-xl border border-gray-700">
                    <div class="text-indigo-400 text-4xl font-black mb-4">2</div>
                    <h3 class="text-xl font-semibold mb-2">Get Your New URL</h3>
                    <p class="text-gray-400">We generate a special URL that contains the logic to open the YouTube app.</p>
                </div>
                <div class="bg-gray-800/30 p-6 rounded-xl border border-gray-700">
                    <div class="text-indigo-400 text-4xl font-black mb-4">3</div>
                    <h3 class="text-xl font-semibold mb-2">Share & Engage</h3>
                    <p class="text-gray-400">Use this new link on Instagram, Facebook, etc., and watch your engagement grow.</p>
                </div>
            </div>
        </section>

        <!-- The Problem vs Solution -->
        <section class="mt-20 md:mt-28 max-w-5xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-10">The Problem You're Solving</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-red-900/20 border border-red-700/50 p-6 rounded-xl">
                    <h3 class="text-2xl font-bold mb-4">Regular Links</h3>
                    <ul class="space-y-3 text-gray-300">
                        <li class="flex items-start"><span class="text-red-400 mr-3 mt-1">❌</span> Opens in a slow in-app browser.</li>
                        <li class="flex items-start"><span class="text-red-400 mr-3 mt-1">❌</span> Viewers are not logged in.</li>
                        <li class="flex items-start"><span class="text-red-400 mr-3 mt-1">❌</span> Subscribing is a multi-step hassle.</li>
                        <li class="flex items-start"><span class="text-red-400 mr-3 mt-1">❌</span> Lost engagement and watch time.</li>
                    </ul>
                </div>
                <div class="bg-green-900/20 border border-green-700/50 p-6 rounded-xl">
                    <h3 class="text-2xl font-bold mb-4">With This Tool</h3>
                    <ul class="space-y-3 text-gray-300">
                        <li class="flex items-start"><span class="text-green-400 mr-3 mt-1">✔️</span> Opens directly in the YouTube app.</li>
                        <li class="flex items-start"><span class="text-green-400 mr-3 mt-1">✔️</span> Viewers are already logged in.</li>
                        <li class="flex items-start"><span class="text-green-400 mr-3 mt-1">✔️</span> Easy one-tap subscribe and comment.</li>
                        <li class="flex items-start"><span class="text-green-400 mr-3 mt-1">✔️</span> Increased engagement and subscribers.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center mt-20 md:mt-28 text-gray-500">
             <p>Built for <a href="https://github.com/farzamify/InApp" target="_blank" rel="noopener noreferrer" class="hover:text-indigo-400">Farzamify/InApp</a></p>
        </footer>

    </div>

    <!-- Main Logic Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('link-form');
            const youtubeUrlInput = document.getElementById('youtube-url');
            const resultDiv = document.getElementById('result');
            const generatedUrlInput = document.getElementById('generated-url');
            const copyButton = document.getElementById('copy-button');
            const errorMessage = document.getElementById('error-message');

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const url = youtubeUrlInput.value.trim();
                
                // Regex to extract video, channel, or playlist ID from various YouTube URL formats
                const youtubeRegex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/|youtube\.com\/shorts\/)([^"&?\/ ]{11})|youtube\.com\/(?:channel\/|c\/)([^"&?\/ ]+)|youtube\.com\/playlist\?list=([^"&?\/ ]+)/;
                const match = url.match(youtubeRegex);

                if (match) {
                    const videoId = match[1];
                    const channelId = match[2];
                    const playlistId = match[3];
                    
                    const baseUrl = window.location.origin + window.location.pathname;
                    let newUrl = '';

                    if (videoId) {
                        newUrl = `${baseUrl}?v=${videoId}`;
                    } else if (channelId) {
                        newUrl = `${baseUrl}?c=${channelId}`;
                    } else if (playlistId) {
                        newUrl = `${baseUrl}?p=${playlistId}`;
                    } else {
                        showError();
                        return;
                    }

                    generatedUrlInput.value = newUrl;
                    resultDiv.classList.remove('hidden');
                    errorMessage.classList.add('hidden');
                    copyButton.textContent = 'Copy';
                    copyButton.classList.remove('bg-green-600');
                    copyButton.classList.add('bg-gray-600');

                } else {
                    showError();
                }
            });
            
            function showError() {
                resultDiv.classList.add('hidden');
                errorMessage.classList.remove('hidden');
            }

            copyButton.addEventListener('click', () => {
                generatedUrlInput.select();
                // Using document.execCommand for compatibility in iFrames/sandboxed environments
                try {
                    document.execCommand('copy');
                    copyButton.textContent = 'Copied!';
                    copyButton.classList.remove('bg-gray-600');
                    copyButton.classList.add('bg-green-600');
                    setTimeout(() => {
                        copyButton.textContent = 'Copy';
                        copyButton.classList.remove('bg-green-600');
                        copyButton.classList.add('bg-gray-600');
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
            });
        });
    </script>

</body>
</html>

